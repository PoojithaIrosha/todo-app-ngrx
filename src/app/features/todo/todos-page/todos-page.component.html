<div class="mx-auto max-w-xl px-4 py-10">
  <header class="mb-6">
    <h1 class="text-3xl font-bold tracking-tight">Tasks</h1>
    <p class="text-sm text-zinc-500 dark:text-zinc-400">
      Keep track of what needs doing. Data persists in your browser.
    </p>
  </header>

  <form (ngSubmit)="addTodo()" class="mb-6">
    <div class="flex gap-2">
      <input
        type="text"
        [formControl]="title"
        placeholder="Add a new task..."
        class="flex-1 rounded-xl border border-zinc-200 bg-white px-4 py-3 text-sm outline-none shadow-card
                   focus:ring-2 focus:ring-indigo-500 dark:border-zinc-700 dark:bg-zinc-800"
      />
      <button
        type="submit"
        [disabled]="title.invalid"
        class="rounded-xl bg-indigo-600 px-4 py-3 text-sm font-medium text-white hover:bg-indigo-500
                   disabled:opacity-50 disabled:hover:bg-indigo-600"
      >
        Add
      </button>
    </div>
    <p *ngIf="title.invalid && title.touched" class="mt-2 text-xs text-red-500">
      Please enter a task title.
    </p>
  </form>

  <app-filter-bar
    class="mb-4"
    [currentFilter]="filter$ | async"
    [activeCount]="activeCount$ | async"
    [completedCount]="completedCount$ | async"
    (filterChange)="changeFilter($event)"
    (clearCompleted)="clearCompleted()"
  ></app-filter-bar>

  <ul class="space-y-2 mt-5">
    <li *ngFor="let todo of (todos$ | async); trackBy: trackById">
      <app-todo-item
        [todo]="todo"
        (toggle)="toggle($event)"
        (remove)="remove($event)"
        (updateTitle)="updateTitle($event.id, $event.title)"
      ></app-todo-item>
    </li>
  </ul>

  <p *ngIf="(todos$ | async)?.length === 0" class="mt-8 text-center text-sm text-zinc-500">
    No tasks yet. Add your first one above.
  </p>
</div>
